/* Variables in App.css */

/* Reset & Base */
* {
  box-sizing: border-box;
}

body {
  font-family: 'Outfit', sans-serif;
}

/* Branding Font */
.brand-font {
  font-family: "Imperial Script", cursive !important;
  font-weight: 700 !important;
  font-style: normal !important;
  font-size: 2.2rem !important;
  /* Increased size for better visibility */
  /* transform: translateY(4px) !important; */
  /* Slight adjustment for script alignment */
}

/* ----------------- 
   Side Navigation 
------------------ */
.side-navigation {
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: var(--sidebar-collapsed-width);
  background-color: var(--bg-secondary);
  border-right: 1px solid var(--border-color);
  display: flex;
  flex-direction: column;
  z-index: 1000;
  padding: 1.5rem 0.75rem;
  /* Reduced padding for collapsed */
  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  overflow: hidden;
  /* Hide overflow content when collapsed */
  box-shadow: var(--shadow-sm);
}

.side-navigation.expanded {
  width: var(--sidebar-expanded-width);
  box-shadow: 4px 0 24px rgba(0, 0, 0, 0.1);
  /* Add shadow when expanded to show layer */
  padding: 1.5rem 1rem;
}

/* Sidebar Header / Logo */
.sidebar-header {
  display: flex;
  align-items: center;
  /* Justify handled by content presence (flex-1 vs centered) */
  justify-content: space-between;
  margin-bottom: 2rem;
  padding: 0 0.25rem;
  white-space: nowrap;
  height: 48px;
  position: relative;
}

/* When collapsed, we want the header to strictly center the toggle button */
.side-navigation:not(.expanded) .sidebar-header {
  justify-content: center;
  padding: 0;
}

.logo-container {
  min-width: 36px;
  display: flex;
  justify-content: center;
}

.logo-img {
  width: 44px;
  height: 44px;
  object-fit: contain;
}

.logo-text {
  font-family: 'Outfit', sans-serif;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-primary2);
  letter-spacing: -0.5px;
  opacity: 1;
  transition: opacity 0.2s ease;
}

/* Unified Toggle Button (Inside Sidebar) */
.sidebar-toggle-btn {
  background: rgba(0, 0, 0, 0.03);
  /* Subtle bg for visibility */
  border: 1px solid transparent;
  color: var(--text-primary);
  /* High contrast */
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  /* Increased from 32px */
  height: 44px;
  /* Increased from 32px */
  border-radius: 8px;
  /* Slightly larger radius */
  transition: all 0.2s;
  flex-shrink: 0;
  padding: 0;
}

.sidebar-toggle-btn:hover {
  background: var(--hover-bg);
  color: var(--accent-color);
  border-color: var(--border-color);
}

.sidebar-toggle-btn.centered {
  margin: 0 auto;
  width: 100%;
}

/* Ensure Logo takes space when visible */
.header-content {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Hide text when collapsed */
.logo-text.hidden {
  opacity: 0;
  pointer-events: none;
  transform: translateX(-10px);
}

/* Force toggle button to be hidden in collapsed mode if space is tight, 
   BUT we need it to open.
   Actually, if I hover it opens.
   "not only hovering" -> they want to CLICK to open.
   But if they can't see the button without hovering...
   
   Okay, let's make the Sidebar Header contain ONLY the Toggle Button when collapsed? 
   No, branding is important.
   
   Let's use the `sidebar-toggle` from before but place it INSIDE, centered.
   
   Refined Logic:
   Collapsed: Header shows Toggle Button (Menu). Logo Hidden.
   Expanded: Header shows Logo + Toggle Button (Chevron).
   
   Let's adjust the CSS to hide logo when collapsed and show menu button.
*/

/* Navigation Menu */
.nav-menu {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  flex: 1;
}

.nav-item {
  display: flex;
  align-items: center;
  padding: 0.85rem 0;
  /* Vertical padding only, horizontal handled by center/gap */
  border-radius: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  text-decoration: none;
  white-space: nowrap;
  overflow: hidden;
}

.nav-item:hover {
  background-color: var(--hover-bg);
  color: var(--text-primary);
}

.nav-item.active {
  background-color: var(--active-bg);
  color: var(--accent-color);
  font-weight: 600;
}

/* Icon Wrapper ensures consistent centering in collapsed mode */
.icon-wrapper {
  min-width: 44px;
  /* Matches collapsed width effectively minus padding */
  display: flex;
  justify-content: center;
  align-items: center;
}


.nav-label {
  font-size: 1rem;
  font-weight: 500;
  margin-left: 0.5rem;
  transition: opacity 0.2s ease;
  opacity: 1;
}

.nav-label.hidden {
  opacity: 0;
  pointer-events: none;
}

/* Active Indicator */
.active-indicator {
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  height: 60%;
  width: 4px;
  border-radius: 0 4px 4px 0;
  background-color: var(--accent-color);
}

/* Sidebar Footer / Logout */
.sidebar-footer {
  margin-top: auto;
  padding-top: 1rem;
  border-top: 1px solid var(--border-color);
}

.nav-item.logout {
  color: #ef4444;
}

.nav-item.logout:hover {
  background-color: rgba(239, 68, 68, 0.1);
  color: #f87171;
}


/* ----------------- 
   Top Navbar 
------------------ */
.top-navbar {
  position: fixed;
  top: 0;
  left: var(--sidebar-collapsed-width);
  /* Always start from collapsed width */
  width: calc(100% - var(--sidebar-collapsed-width));
  /* Always fit remaining space */
  height: var(--header-height);
  background-color: var(--navbar-bg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border-color);
  z-index: 999;
  display: flex;
  align-items: center;
  justify-content: space-between;
  /* Space between Left (Menu/Logo) and Right (User) */
  padding: 0 2rem;
  transition: all 0.3s ease;
}

.navbar-left-section {
  display: flex;
  align-items: center;
  gap: 1rem;
}

/* Navbar Logo (Visible when Sidebar Closed) */
.navbar-logo {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  cursor: pointer;
  animation: fadeIn 0.3s ease;
}

.nav-logo-img {
  width: 40px;
  height: 40px;
  object-fit: contain;
}

.nav-logo-text {
  color: var(--text-primary2);
  letter-spacing: -0.5px;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Right Content (User) */
.navbar-content {
  display: flex;
  align-items: center;
  gap: 1.5rem;
}

/* Header Content Inside Sidebar (Hidden when Collapsed) */
.header-content.hidden {
  display: none !important;
}

/* User Actions */
.user-actions {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.theme-toggle-btn {
  background: transparent;
  border: 1px solid var(--border-color);
  color: var(--text-secondary);
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
  padding: 0;
}

.theme-toggle-btn:hover {
  background-color: var(--hover-bg);
  color: var(--text-primary);
  border-color: var(--text-secondary);
}

.user-info {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  text-align: right;
}

.welcome-text {
  color: var(--text-secondary);
  font-size: 0.9rem;
}

.username {
  color: var(--text-primary);
  font-weight: 600;
  font-size: 1rem;
}

.user-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent-color), var(--accent-hover));
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 1rem;
  box-shadow: 0 4px 10px rgba(var(--accent-color-rgb), 0.3);
}

/* Auth Buttons */
.auth-buttons {
  display: flex;
  gap: 1rem;
}

.btn-login,
.btn-signup {
  padding: 0.5rem 1.25rem;
  border-radius: 8px;
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-login {
  background: transparent;
  color: var(--text-primary);
  border: 1px solid var(--border-color);
}

.btn-login:hover {
  background-color: var(--hover-bg);
}

.btn-signup {
  background-color: var(--accent-color);
  color: white;
  border: none;
}

.btn-signup:hover {
  background-color: var(--accent-hover);
  transform: translateY(-1px);
}

/* Mobile Menu Button */
.mobile-menu-btn {
  display: none;
  /* Hidden on desktop */
  background: transparent;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  align-items: center;
  justify-content: center;
  padding: 0;
}

/* Sidebar Overlay (Global) */
.sidebar-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: transparent;
  /* Transparent on desktop */
  z-index: 999;
  /* Covers Navbar (999) but below Sidebar (1000) */
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

.sidebar-overlay.visible {
  opacity: 1;
  pointer-events: auto;
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
  .side-navigation {
    transform: translateX(-100%);
    /* Completely hidden by default on mobile */
    width: var(--sidebar-expanded-width);
    /* Full width when open on mobile */
  }

  .side-navigation.expanded {
    transform: translateX(0);
    height: 100%;
  }

  .mobile-menu-btn {
    display: flex;
    /* Show on mobile */
  }

  /* Navbar adjustments for mobile */
  .top-navbar {
    left: 0;
    width: 100%;
    padding: 0 1rem;
  }

  /* Hide sidebar toggle when on mobile because we have the Close button inside? 
     Actually, sidebar has Close button. Navbar has Open button.
     We might want to hide the "Centered Menu Button" inside the sidebar on mobile 
     because it's confusing if the sidebar is off-screen.
     But the sidebar is HIDDEN.
     When Open: It shows Logo + Chevron (Close). This is fine.
  */

  .welcome-text {
    display: none;
  }

  .nav-logo-text {
    display: none;
  }

  /* Darken overlay on mobile */
  .sidebar-overlay {
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(2px);
  }
}